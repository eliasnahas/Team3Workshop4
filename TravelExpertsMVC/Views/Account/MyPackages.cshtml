@model IEnumerable<TravelExpertsData.Package>

@using Microsoft.AspNetCore.Http;

@{
    ViewData["Title"] = "MyPackages";
    int packageIncrementalId = 0;
}

<h1>Packages for @User.Identity!.Name </h1>

@if(Model != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>
                @Html.DisplayNameFor(model => model.PackageId)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.PkgName)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.PkgStartDate)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.PkgEndDate)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.PkgDesc)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.PkgBasePrice)
                </th>
                <th>
                @Html.DisplayNameFor(model => model.PkgAgencyCommission)
                </th>
                <th>

                </th>
                
            </tr>
        </thead>
        <tbody>
        @foreach (var item in Model)
        {
                packageIncrementalId++;
                <tr>
                    <td>
                    @Html.DisplayFor(modelItem => item.PackageId)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.PkgName)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.PkgStartDate)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.PkgEndDate)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.PkgDesc)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.PkgBasePrice)
                    </td>
                    <td>
                    @Html.DisplayFor(modelItem => item.PkgAgencyCommission)
                    </td>
                    <td>
                    @Html.ActionLink("Remove", "MyPackages", new { id=item.PackageId }, new { @class = "btn btn-secondary" })
                    </td>
                    @* <td>
                    @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
                    @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
                    </td> *@
                    
                </tr>
        }
        </tbody>
    </table>
    <div class="d-flex justify-content-end">
        <label class="col-form-label p-2 fw-bold" for="totalCost">Total Cost: </label>
        <input class="form-control form-inline col-2 w-25" value="@packageIncrementalId" name="totalCost" readonly />  
    </div>
}
else 
{
    <h1 class="bg-danger text-light">No packages found. Please Re-Login and try again.</h1>
}


